"use strict";(self.webpackChunksystem_docs=self.webpackChunksystem_docs||[]).push([[138],{3905:(e,t,n)=>{n.d(t,{Zo:()=>m,kt:()=>g});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),c=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},m=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,s=e.originalType,l=e.parentName,m=o(e,["components","mdxType","originalType","parentName"]),p=c(n),u=a,g=p["".concat(l,".").concat(u)]||p[u]||d[u]||s;return n?r.createElement(g,i(i({ref:t},m),{},{components:n})):r.createElement(g,i({ref:t},m))}));function g(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var s=n.length,i=new Array(s);i[0]=u;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o[p]="string"==typeof e?e:a,i[1]=o;for(var c=2;c<s;c++)i[c]=n[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}u.displayName="MDXCreateElement"},8711:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>s,metadata:()=>o,toc:()=>c});var r=n(7462),a=(n(7294),n(3905));const s={sidebar_position:3},i="Results",o={unversionedId:"performance-tests/results",id:"performance-tests/results",title:"Results",description:"All the test runs eventually caused Messenger API to become unresponsive and failed on a timeout error from acquiring",source:"@site/docs/performance-tests/3-results.md",sourceDirName:"performance-tests",slug:"/performance-tests/results",permalink:"/esme/docs/performance-tests/results",draft:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"docSidebar",previous:{title:"Infrastructure",permalink:"/esme/docs/performance-tests/infrastructure"},next:{title:"Summary",permalink:"/esme/docs/summary"}},l={},c=[{value:"100ms send message interval",id:"100ms-send-message-interval",level:2},{value:"1000ms send message interval",id:"1000ms-send-message-interval",level:2},{value:"10000ms send message interval",id:"10000ms-send-message-interval",level:2},{value:"Discussion",id:"discussion",level:2}],m={toc:c},p="wrapper";function d(e){let{components:t,...s}=e;return(0,a.kt)(p,(0,r.Z)({},m,s,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"results"},"Results"),(0,a.kt)("p",null,"All the test runs eventually caused Messenger API to become unresponsive and failed on a timeout error from acquiring\na new WebSocket connection by one of the constantly added participant workers. Basic AWS monitoring graphs in the time\nrange of the test runs are shown below:"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"organizer overview",src:n(676).Z,width:"774",height:"397"})),(0,a.kt)("p",null,"In total 9 valid tests has been run. Each set of configuration parameters: start chat interval ",(0,a.kt)("inlineCode",{parentName:"p"},"sci"),", create participant\ninterval ",(0,a.kt)("inlineCode",{parentName:"p"},"cpi")," and send message interval ",(0,a.kt)("inlineCode",{parentName:"p"},"smi")," is repeated 3 times as summarized in the table below. The start chat\ninterval and create participant interval are constant in all test runs while send message interval varies from 100\nmilliseconds to 10 seconds."),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"sci ","[ms]"),(0,a.kt)("th",{parentName:"tr",align:null},"cpi ","[ms]"),(0,a.kt)("th",{parentName:"tr",align:null},"smi ","[ms]"),(0,a.kt)("th",{parentName:"tr",align:null},"repetitions"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"10"),(0,a.kt)("td",{parentName:"tr",align:null},"20"),(0,a.kt)("td",{parentName:"tr",align:null},"100"),(0,a.kt)("td",{parentName:"tr",align:null},"3")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"10"),(0,a.kt)("td",{parentName:"tr",align:null},"20"),(0,a.kt)("td",{parentName:"tr",align:null},"1000"),(0,a.kt)("td",{parentName:"tr",align:null},"3")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"10"),(0,a.kt)("td",{parentName:"tr",align:null},"20"),(0,a.kt)("td",{parentName:"tr",align:null},"10000"),(0,a.kt)("td",{parentName:"tr",align:null},"3")))),(0,a.kt)("h2",{id:"100ms-send-message-interval"},"100ms send message interval"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"graph 100ms",src:n(1980).Z,width:"1667",height:"1031"})),(0,a.kt)("h2",{id:"1000ms-send-message-interval"},"1000ms send message interval"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"graph 1000ms",src:n(1912).Z,width:"1667",height:"1031"})),(0,a.kt)("h2",{id:"10000ms-send-message-interval"},"10000ms send message interval"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"graph 10000ms",src:n(7767).Z,width:"1667",height:"1031"})),(0,a.kt)("h2",{id:"discussion"},"Discussion"),(0,a.kt)("p",null,"In the graphs for 100ms and 1000ms test runs it is clearly visible that the sent messages rate reaches a certain plateau\nand after around 45 seconds the first timeout error from acquiring a new WebSocket connection occurs -- the default\nhandshake timeout in the WebSocket client used in the performance tests is 45 seconds."),(0,a.kt)("p",null,"The registered sent messages rate might be different from the rate of messages successfully processed by the system. To\nimprove quality of the performance test, organizer worker could read and report incoming user messages processed by the\nMessenger API or even respond to participant workers. Moreover, the test scenario could be changed to set a pool of\norganizers accepting chats."),(0,a.kt)("p",null,"The relationship between maximum message rate registered by the participant workers and active chats count at the moment\nof the first Messenger API connection initialization timeout is depicted in the graph below:"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"graph analysis",src:n(2997).Z,width:"1667",height:"1031"})),(0,a.kt)("p",null,"In the future, configuring and running the performance test scenarios in the cloud could be automated in CI/CD process\nto simplify obtaining more data points in the graph and better estimating the Messenger API throughput limits."))}d.isMDXComponent=!0},1980:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/graph_100-e39a8b9f52fd46f17ad3f94ca493befc.png"},1912:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/graph_1000-05138f59dad65de0f62e4ff6a1806c42.png"},7767:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/graph_10000-c2eccd285051cdbe18257a572ab4159d.png"},2997:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/graph_analysis-461e4bbbfdbc10fecb5ac293aa878bd3.png"},676:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/aws_monitoring-442d2af9e00a891510b706d137a3cc42.png"}}]);