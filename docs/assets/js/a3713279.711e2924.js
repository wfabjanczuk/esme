"use strict";(self.webpackChunksystem_docs=self.webpackChunksystem_docs||[]).push([[720],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>h});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=r.createContext({}),l=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=l(e.components);return r.createElement(c.Provider,{value:t},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),p=l(n),m=a,h=p["".concat(c,".").concat(m)]||p[m]||u[m]||o;return n?r.createElement(h,i(i({ref:t},d),{},{components:n})):r.createElement(h,i({ref:t},d))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=m;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s[p]="string"==typeof e?e:a,i[1]=s;for(var l=2;l<o;l++)i[l]=n[l];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},8997:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>l});var r=n(7462),a=(n(7294),n(3905));const o={sidebar_position:5},i="Deployment",s={unversionedId:"deployment",id:"deployment",title:"Deployment",description:"Randomly generating safe production environment secrets (database credentials, API keys, etc.) has been automated with a",source:"@site/docs/deployment.md",sourceDirName:".",slug:"/deployment",permalink:"/esme/docs/deployment",draft:!1,tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"docSidebar",previous:{title:"Development",permalink:"/esme/docs/development"},next:{title:"Performance tests",permalink:"/esme/docs/category/performance-tests"}},c={},l=[],d={toc:l},p="wrapper";function u(e){let{components:t,...o}=e;return(0,a.kt)(p,(0,r.Z)({},d,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"deployment"},"Deployment"),(0,a.kt)("p",null,"Randomly generating safe production environment secrets (database credentials, API keys, etc.) has been automated with a\nGolang script providing config files ready to be used with appropriate ",(0,a.kt)("inlineCode",{parentName:"p"},"docker-compose.yml")," scripts prepared in\nthe ",(0,a.kt)("inlineCode",{parentName:"p"},"/envs/prod")," directory."),(0,a.kt)("p",null,"All the backend components and the Organizer UI were deployed in the Amazon Web Services using a separate EC2\ninstance for each component (t2.micro, 1vCPU, 1GB RAM, Ubuntu 22.04)."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"aws instances",src:n(6812).Z,width:"1280",height:"572"})),(0,a.kt)("p",null,"Participant UI has been built for Android and the ",(0,a.kt)("inlineCode",{parentName:"p"},".apk")," has been published in the\n",(0,a.kt)("a",{parentName:"p",href:"https://expo.dev/accounts/wfabjanczuk/projects/participant/builds/fda0130c-a662-4cdf-814e-f3bbdec07340"},"Expo platform"),"\nand tested on Samsung Galaxy A52 (Android) and Xiaomi Redmi Note 8 PRO. The build is not functional anymore as it uses\naddresses of AWS servers that are now terminated."),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Conversation"),(0,a.kt)("th",{parentName:"tr",align:null},"Event details"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("img",{alt:"android chat",src:n(9715).Z,width:"1080",height:"2400"})),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("img",{alt:"android event",src:n(2760).Z,width:"1080",height:"2400"}))))),(0,a.kt)("p",null,"The production environment does not meet industry standards yet. System should have a registered domain, production\nservers should be secured with SSL certificates and configured for automatic scaling, web application should use secure\nflags in cookies, mobile application should be published in Google Play and App Store."),(0,a.kt)("p",null,"The biggest architectural challenge, which is scaling the Messenger API, has not been solved yet. In the current\nimplementation, the Messenger API is stateful and depends on handling all chats and WebSocket connections on one server."),(0,a.kt)("p",null,"In the next iteration, Messenger API should be redesigned to decouple handling chats from the state of WebSocket\nconnections. The solution could involve an event-driven architecture pattern where the user actions in the chat would be\nstreamed to a cluster of consumers. The servers maintaining WebSocket connections with the users could subscribe to the\nstreams of chat updates."),(0,a.kt)("p",null,"What is more, fault tolerance and availability of the system could be significantly improved with a separate\nauthentication service and horizontal scalability of system components, which should be preceded with load balancers to\nevenly distribute the traffic between healthy servers and to prevent sending it to the malfunctioning ones."))}u.isMDXComponent=!0},9715:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/android_chat-43a922c3468cb69d2f1da5a760510190.jpg"},2760:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/android_event-c6a61f5993a3ce75a55415fc036a3b30.jpg"},6812:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/aws_ec2_instances-85cd19c684a193dd8c88843fcafc3be4.png"}}]);